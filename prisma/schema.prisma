generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
}

model Character {
  id             String    @id @default(ulid())
  name           String?   @db.VarChar(150)
  slug           String    @unique @db.VarChar(150)
  alternateNames String    @db.VarChar(150)
  species        String    @db.VarChar(50)
  gender         String    @db.VarChar(20)
  ancestry       String?   @db.VarChar(100)
  eyeColour      String?   @db.VarChar(30)
  hairColour     String    @db.VarChar(30)
  patronus       String?   @db.VarChar(100)
  birthDate      DateTime?
  birthYear      Int?      @db.Integer

  isAlive           Boolean?
  isWizard          Boolean?
  isHogwartsStudent Boolean?
  isHogwartsStaff   Boolean?

  actor           String  @db.VarChar(150)
  alternateActors String? @db.VarChar(150)
  imageUrl        String? @db.VarChar(255)

  wands Wand[]

  hogwartsHouseSlug String?
  hogwartsHouse     HogwartsHouse? @relation(fields: [hogwartsHouseSlug], references: [slug])

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Wand {
  id String @id @default(ulid())

  name String? @default("Unknown Wand") @db.VarChar(150)

  slug   String? @unique @default(cuid()) @db.VarChar(150)
  wood   String? @db.VarChar(50)
  core   String? @db.VarChar(50)
  length Float?

  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade)
  characterId String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model HogwartsHouse {
  id      String @id @default(ulid())
  slug    String @unique @db.VarChar(50)
  name    String @unique @db.VarChar(50)
  emoji   String @db.VarChar(10)
  founder String @db.VarChar(100)
  animal  String @db.VarChar(50)

  characters Character[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}
