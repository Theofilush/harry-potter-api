generator client {
  provider        = "prisma-client"
  output          = "../src/generated/prisma"
  previewFeatures = ["relationJoins"]
}

datasource db {
  provider = "postgresql"
}

model Character {
  id String @id @default(ulid())

  // TODO: reduce the data type size

  name           String
  slug           String @unique @db.VarChar(300)
  alternateNames String @db.VarChar(300)

  species String @db.VarChar(300) // Human, Elf?
  gender  String @db.VarChar(10) // male, female, unknown

  birthDate DateTime?
  birthYear Int?      @db.Integer

  ancestry   String @db.VarChar(300) // ??
  eyeColour  String @db.VarChar(10) // ?
  hairColour String @db.VarChar(10) // ?
  patronus   String @db.VarChar(300) // ?

  isAlive           Boolean
  isWizard          Boolean
  isHogwartsStudent Boolean // ?
  isHogwartsStaff   Boolean // ?

  actor           String  @db.VarChar(300)
  alternateActors String? @db.VarChar(300)

  imageUrl String @db.VarChar(300)

  wands Wand[]

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

model Wand {
  id String @id @default(uuid())

  slug String @unique
  name String

  woodName String? @db.VarChar(300)
  coreName String? @db.VarChar(300)
  length   Float? // cm

  character   Character @relation(fields: [characterId], references: [id], onDelete: Cascade)
  characterId String

  createdAt DateTime @default(now())
  updatedAt DateTime @default(now()) @updatedAt
}

// TODO
// model House
// slug
// name // Griffyndor, Slytherin, Hufflepuff, Ravenclaw

// TODO
// model Actor
